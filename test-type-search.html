<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æµ‹è¯•ç±»å‹æœç´¢åŠŸèƒ½</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .test-result {
            background: #f5f5f5;
            padding: 10px;
            margin: 10px 0;
            border-radius: 3px;
            font-family: monospace;
            white-space: pre-wrap;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <h1>æµ‹è¯•ç±»å‹æœç´¢åŠŸèƒ½</h1>
    
    <div class="test-section">
        <h2>æµ‹è¯•è¯´æ˜</h2>
        <p>è¿™ä¸ªé¡µé¢ç”¨äºæµ‹è¯• /resources/search æ¥å£æ˜¯å¦æ­£ç¡®æ”¯æŒ type å‚æ•°ã€‚</p>
        <p>è¯·æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„æ§åˆ¶å°æŸ¥çœ‹è¯¦ç»†çš„æµ‹è¯•ç»“æœã€‚</p>
    </div>

    <div class="test-section">
        <h2>æµ‹è¯•æ“ä½œ</h2>
        <button onclick="testBasicSearch()">æµ‹è¯•åŸºç¡€æœç´¢</button>
        <button onclick="testTypeSearch()">æµ‹è¯•ç±»å‹æœç´¢</button>
        <button onclick="testCombinedSearch()">æµ‹è¯•ç»„åˆæœç´¢</button>
        <button onclick="testAllTypes()">æµ‹è¯•æ‰€æœ‰ç±»å‹</button>
        <button onclick="testUnifiedInterface()">æµ‹è¯•ç»Ÿä¸€æ¥å£</button>
    </div>

    <div class="test-section">
        <h2>æµ‹è¯•ç»“æœ</h2>
        <div id="results"></div>
    </div>

    <script>
        // æ¨¡æ‹Ÿ API è°ƒç”¨
        async function callSearchAPI(searchData) {
            console.log('ğŸ” è°ƒç”¨æœç´¢ API:', searchData);
            
            // è¿™é‡Œæ¨¡æ‹Ÿå®é™…çš„ API è°ƒç”¨é€»è¾‘
            const mockResources = [
                { id: 1, name: 'Vue.js æ•™ç¨‹', type: 'study', content: 'å‰ç«¯æ¡†æ¶å­¦ä¹ èµ„æ–™' },
                { id: 2, name: 'å¤ä»‡è€…è”ç›Ÿ', type: 'movie', content: 'è¶…çº§è‹±é›„ç”µå½±' },
                { id: 3, name: 'è¿›å‡»çš„å·¨äºº', type: 'anime', content: 'çƒ­é—¨åŠ¨æ¼«ä½œå“' },
                { id: 4, name: 'æ•°æ®ç»“æ„ä¸ç®—æ³•', type: 'study', content: 'è®¡ç®—æœºä¸“ä¸šè¯¾ç¨‹' },
                { id: 5, name: 'æ–—ç ´è‹ç©¹', type: 'novel', content: 'ç„å¹»å°è¯´ç»å…¸' },
                { id: 6, name: '4Ké£æ™¯å£çº¸', type: 'wallpaper', content: 'é«˜æ¸…å£çº¸åˆé›†' }
            ];

            let filtered = mockResources;
            
            // æŒ‰æœç´¢è¯è¿‡æ»¤
            if (searchData.searchTerm) {
                filtered = filtered.filter(resource =>
                    resource.name.toLowerCase().includes(searchData.searchTerm.toLowerCase()) ||
                    resource.content.toLowerCase().includes(searchData.searchTerm.toLowerCase())
                );
            }
            
            // æŒ‰ç±»å‹è¿‡æ»¤
            if (searchData.type) {
                filtered = filtered.filter(resource => resource.type === searchData.type);
            }

            const result = {
                total: filtered.length,
                list: filtered,
                pageNum: searchData.page || 1,
                pageSize: searchData.size || 10
            };

            console.log('âœ… API å“åº”:', result);
            return result;
        }

        function displayResult(title, result) {
            const resultsDiv = document.getElementById('results');
            const resultDiv = document.createElement('div');
            resultDiv.className = 'test-result';
            resultDiv.innerHTML = `<strong>${title}</strong>\n${JSON.stringify(result, null, 2)}`;
            resultsDiv.appendChild(resultDiv);
        }

        async function testBasicSearch() {
            console.log('ğŸ§ª æµ‹è¯•åŸºç¡€æœç´¢...');
            const result = await callSearchAPI({
                searchTerm: 'Vue',
                page: 1,
                size: 10
            });
            displayResult('åŸºç¡€æœç´¢ (searchTerm: "Vue")', result);
        }

        async function testTypeSearch() {
            console.log('ğŸ§ª æµ‹è¯•ç±»å‹æœç´¢...');
            const result = await callSearchAPI({
                type: 'study',
                page: 1,
                size: 10
            });
            displayResult('ç±»å‹æœç´¢ (type: "study")', result);
        }

        async function testCombinedSearch() {
            console.log('ğŸ§ª æµ‹è¯•ç»„åˆæœç´¢...');
            const result = await callSearchAPI({
                searchTerm: 'æ•°æ®',
                type: 'study',
                page: 1,
                size: 10
            });
            displayResult('ç»„åˆæœç´¢ (searchTerm: "æ•°æ®", type: "study")', result);
        }

        async function testAllTypes() {
            console.log('ğŸ§ª æµ‹è¯•æ‰€æœ‰ç±»å‹...');
            const types = ['study', 'movie', 'anime', 'novel', 'wallpaper'];

            for (const type of types) {
                const result = await callSearchAPI({
                    type: type,
                    page: 1,
                    size: 10
                });
                displayResult(`ç±»å‹æœç´¢ (type: "${type}")`, result);
            }
        }

        async function testUnifiedInterface() {
            console.log('ğŸ§ª æµ‹è¯•ç»Ÿä¸€æ¥å£...');

            // æµ‹è¯•1: è·å–æ‰€æœ‰èµ„æºï¼ˆç©ºæœç´¢è¯ï¼‰
            const result1 = await callSearchAPI({
                searchTerm: '',
                type: '',
                page: 0,
                size: 5
            });
            displayResult('ç»Ÿä¸€æ¥å£ - è·å–æ‰€æœ‰èµ„æº', result1);

            // æµ‹è¯•2: æŒ‰ç±»å‹è·å–èµ„æºï¼ˆç©ºæœç´¢è¯ + ç±»å‹ï¼‰
            const result2 = await callSearchAPI({
                searchTerm: '',
                type: 'study',
                page: 0,
                size: 5
            });
            displayResult('ç»Ÿä¸€æ¥å£ - æŒ‰ç±»å‹è·å–èµ„æº', result2);

            // æµ‹è¯•3: æœç´¢ + ç±»å‹
            const result3 = await callSearchAPI({
                searchTerm: 'Vue',
                type: 'study',
                page: 0,
                size: 5
            });
            displayResult('ç»Ÿä¸€æ¥å£ - æœç´¢+ç±»å‹', result3);

            // æµ‹è¯•4: åˆ†é¡µæµ‹è¯•
            const result4 = await callSearchAPI({
                searchTerm: '',
                type: 'study',
                page: 1,
                size: 2
            });
            displayResult('ç»Ÿä¸€æ¥å£ - åˆ†é¡µæµ‹è¯• (ç¬¬2é¡µ)', result4);
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        window.onload = function() {
            console.log('ğŸ“‹ æµ‹è¯•é¡µé¢å·²åŠ è½½ï¼Œå¯ä»¥å¼€å§‹æµ‹è¯•ç±»å‹æœç´¢åŠŸèƒ½');
            console.log('ğŸ’¡ ç‚¹å‡»æŒ‰é’®æ‰§è¡Œä¸åŒçš„æµ‹è¯•ç”¨ä¾‹');
        };
    </script>
</body>
</html>
